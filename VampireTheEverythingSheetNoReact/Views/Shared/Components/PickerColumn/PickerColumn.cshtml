@using VampireTheEverythingSheetNoReact.Models.Component
@using VampireTheEverythingSheetNoReact.Shared_Files
@model PickerColumnModel

@{
    AutoColumnModel autoColumnModel = new AutoColumnModel
    {
        Row = Model.Row,
        Column = Model.Column,
        Width = Model.Width,
        Traits = Model.VisibleTraits
    };
}

@(await Component.InvokeAsync("AutoColumn", autoColumnModel))

@{
    Model.Height = autoColumnModel.Height ?? 0;

    GridElementModel gridElementModel = new GridElementModel
    {
        Row = Model.RowEnd,
        Column = Model.Column,
        Width = Model.Width,
        Height = 1,
        Content = Component.InvokeAsync("TraitAdder", Model.SelectableTraits)
    };
}

@(await Component.InvokeAsync("GridElement", gridElementModel))

@{
    Model.Height += gridElementModel.Height;
}