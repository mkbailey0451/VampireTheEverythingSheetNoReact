@using VampireTheEverythingSheetNoReact.Models.Component
@using VampireTheEverythingSheetNoReact.Shared_Files
@model AutoColumnModel
@{
    if(Model.HeadingLevel > 0 && !string.IsNullOrEmpty(Model.HeadingText))
    {
        AutoHeaderModel autoHeaderModel = new AutoHeaderModel
        {
            Row = Model.Row,
            Column = Model.Column,
            Width = Model.Width,
            HeadingLevel = Model.HeadingLevel,
            HeadingText = Model.HeadingText
        };
        @(await Component.InvokeAsync("AutoHeader", autoHeaderModel))
        Model.Height = autoHeaderModel.Height;
    }

    foreach(Trait trait in Model.Traits)
    {
        int currentRow = Model.RowEnd;
        @(
        await Component.InvokeAsync("GridElement", new GridElementModel
        {
            Content = Component.InvokeAsync("TraitRenderer", trait),
            Column = Model.Column,
            Row = currentRow,
            Width = Model.Width,
            Height = 1
        })
        )
        currentRow++;
        //we pass this back (by reference) so the caller knows how big the control is
        Model.Height = currentRow - Model.Row;
    }
}